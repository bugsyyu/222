<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[更新日志] 12月11日 - 移动端优化更新 - EduWeb社区</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/community.css">
    <link rel="stylesheet" href="css/discussion.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
    <style>
        body {
            background-image: url('images/new-back.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            background-color: transparent !important;
            position: relative;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        
        /* Add a light overlay to make the background lighter */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.6);
            z-index: 1;
            pointer-events: none;
        }
        
        /* Discussion container background override */
        .discussion-container {
            background: transparent !important;
            position: relative;
            z-index: 2;
            flex: 1 0 auto;
        }
        
        /* Remove existing linear gradient background */
        .discussion-container::before {
            background-image: none !important;
        }
        
        /* Ensure all content appears above overlay */
        .breadcrumb {
            background-color: rgba(255, 255, 255, 0.7) !important;
            backdrop-filter: blur(10px) !important;
            -webkit-backdrop-filter: blur(10px) !important;
            position: relative;
            z-index: 2;
            border-radius: 12px;
            margin: 0 1rem 1rem 1rem;
        }
        
        /* Ensure main content appears above overlay */
        .discussion-main {
            position: relative;
            z-index: 2;
        }
        
        /* 确保页脚位置正确 */
        .main-footer {
            position: relative;
            z-index: 3;
            margin-top: auto;
        }
    </style>
</head>
<body>
    <header class="main-header">
        <nav class="nav-container">
            <div class="logo">
                <a href="index.html"><h1>EduWeb</h1></a>
            </div>
            <div class="nav-links">
                <a href="index.html">首页</a>
                <a href="courses.html">课程</a>
                <a href="community.html" class="active">社区</a>
                <a href="dashboard.html" data-require-login="true">仪表盘</a>
            </div>
            <div class="auth-buttons">
                <!-- 此区域将由auth.js根据登录状态动态更新 -->
                <a href="login.html" class="btn btn-login">登录</a>
                <a href="register.html" class="btn btn-register">注册</a>
            </div>
        </nav>
    </header>

    <div class="discussion-container">
        <main class="discussion-main full-width">
            <!-- 面包屑导航 -->
            <div class="breadcrumb">
                <a href="community.html">社区</a>
                <i class="fas fa-chevron-right"></i>
                <a href="community.html?category=announcements">所有讨论</a>
                <i class="fas fa-chevron-right"></i>
                <span>[更新日志] 12月11日 - 移动端优化更新</span>
            </div>

            <!-- 主要内容区 -->
            <div class="discussion-content">
                <!-- 帖子标题框 -->
                <div class="discussion-title-box">
                    <h1>[更新日志] 12月11日 - 移动端优化更新</h1>
                    <div class="discussion-meta-info">
                        <div class="meta-item">
                            <i class="fas fa-folder"></i>
                            <span>所有讨论</span>
                        </div>
                        <div class="meta-item">
                            <i class="fas fa-clock"></i>
                            <span>发布于 2024年1月4日 14:04</span>
                        </div>
                        <div class="meta-item">
                            <i class="fas fa-comment"></i>
                            <span>48 回复</span>
                        </div>
                    </div>
                    <div class="discussion-tags">
                        <span class="discussion-tag">更新日志</span>
                        <span class="discussion-tag">移动端</span>
                        <span class="discussion-tag">优化</span>
                    </div>
                </div>

                <!-- 帖子区域 -->
                <div class="posts-container">
                    <!-- 原始帖子 -->
                    <article class="post-card original-post" id="post1">
                        <div class="post-card-left">
                            <div class="post-avatar">
                                <img src="images/default-avatar.svg" alt="用户头像" onerror="this.src='images/default-avatar.svg'">
                                <div class="user-role-badge staff">管理员</div>
                            </div>
                        </div>
                        <div class="post-card-right">
                            <div class="post-header">
                                <div class="post-author">
                                    <span class="username">张三</span>
                                    <span class="post-date">2024年1月4日 14:04</span>
                                </div>
                            </div>
                            <div class="post-content">
                                <p>大家好！</p>
                                <p>我们很高兴地宣布，今天我们推出了一系列移动端的优化更新。这些更新主要包括：</p>
                                <ul>
                                    <li>优化了移动端的页面加载速度</li>
                                    <li>改进了移动端的用户界面交互体验</li>
                                    <li>修复了一些已知的显示问题</li>
                                </ul>
                                <p>此外，我们还添加了以下新功能：</p>
                                <ol>
                                    <li>移动端现在支持深色模式</li>
                                    <li>新增了手势操作支持</li>
                                    <li>优化了移动端的图片加载策略</li>
                                </ol>
                                <img src="images/update-preview.jpg" alt="更新预览" class="post-image">
                            </div>
                        </div>
                    </article>

                    <!-- 回复区域 -->
                    <div class="replies-section">
                        <h3 class="replies-heading"><i class="fas fa-comments"></i> 回复 (48)</h3>
                        
                        <!-- 登录提示 - 未登录时显示 -->
                        <div class="login-notice" id="replyLoginNotice">
                            <i class="fas fa-lock"></i>
                            请<a href="login.html">登录</a>后参与讨论，或<a href="register.html">注册</a>新账号
                        </div>

                        <!-- 回复编辑器 - 这里保留 -->
                        
                        <!-- 回复排序控件 - 替换为简单的排序指示 -->
                        <div class="replies-sort">
                            <span class="sort-label"><i class="fas fa-history"></i> 按时间顺序排列（最早优先）</span>
                        </div>
                        
                        <!-- 所有按时间排序的回复列表 -->
                        <div class="chronological-replies" id="chronologicalReplies">
                            <!-- 回复将通过JS按时间顺序添加 -->
                            <!-- 直接回复示例 - 李四 14:30 -->
                            <article class="post-card reply-card" id="reply1">
                                <div class="post-card-left">
                                    <div class="post-avatar">
                                        <img src="images/default-avatar.svg" alt="用户头像" onerror="this.src='images/default-avatar.svg'">
                                        <div class="user-role-badge member">会员</div>
                                    </div>
                                </div>
                                <div class="post-card-right">
                                    <div class="post-header">
                                        <div class="post-author">
                                            <span class="username">李四</span>
                                            <span class="post-date">2024年1月4日 14:30</span>
                                        </div>
                                    </div>
                                    <div class="post-content">
                                        <p>移动端的优化确实很及时，特别是深色模式的支持让我很期待！</p>
                                    </div>
                                    <div class="post-actions">
                                        <button class="post-reply-btn" data-require-login="true" data-parent-id="reply1" data-parent-user="李四">
                                            <i class="fas fa-reply"></i>
                                            回复
                                        </button>
                                    </div>
                                    
                                    <!-- 直接嵌套回复区域 - 最多1级 -->
                                    <div class="nested-replies">
                                        <!-- 嵌套回复示例 -->
                                        <article class="post-card nested-reply-card" id="nested1-nested" data-original-id="nested1">
                                            <div class="post-card-left">
                                                <div class="post-avatar">
                                                    <img src="images/default-avatar.svg" alt="用户头像" onerror="this.src='images/default-avatar.svg'">
                                                    <div class="user-role-badge member">会员</div>
                                                </div>
                                            </div>
                                            <div class="post-card-right">
                                                <div class="post-header">
                                                    <div class="post-author">
                                                        <span class="username">王五</span>
                                                        <span class="post-date">2024年1月4日 14:40</span>
                                                    </div>
                                                </div>
                                                <div class="post-content">
                                                    <p>我已经更新了最新版，深色模式非常棒，对眼睛很友好！</p>
                                                </div>
                                                <div class="post-actions">
                                                    <button class="post-reply-btn" data-require-login="true" data-parent-id="nested1" data-parent-user="王五">
                                                        <i class="fas fa-reply"></i>
                                                        回复
                                                    </button>
                                                </div>
                                            </div>
                                        </article>
                                        
                                        <!-- 添加张三对李四的回复作为嵌套回复 -->
                                        <article class="post-card nested-reply-card" id="nested2-nested" data-original-id="nested2">
                                            <div class="post-card-left">
                                                <div class="post-avatar">
                                                    <img src="images/default-avatar.svg" alt="用户头像" onerror="this.src='images/default-avatar.svg'">
                                                    <div class="user-role-badge staff">管理员</div>
                                                </div>
                                            </div>
                                            <div class="post-card-right">
                                                <div class="post-header">
                                                    <div class="post-author">
                                                        <span class="username">张三</span>
                                                        <span class="post-date">2024年1月4日 14:50</span>
                                                    </div>
                                                </div>
                                                <div class="post-content">
                                                    <p>谢谢支持！我们后续还会继续优化移动端的体验。</p>
                                                </div>
                                                <div class="post-actions">
                                                    <button class="post-reply-btn" data-require-login="true" data-parent-id="nested2" data-parent-user="张三">
                                                        <i class="fas fa-reply"></i>
                                                        回复
                                                    </button>
                                                </div>
                                            </div>
                                        </article>
                                    </div>
                                </div>
                            </article>
                            
                            <!-- 王五的嵌套回复的独立副本 - 14:40 -->
                            <article class="post-card reply-card" id="nested1" data-is-nested-copy="true" data-original-reply="reply1">
                                <div class="post-card-left">
                                    <div class="post-avatar">
                                        <img src="images/default-avatar.svg" alt="用户头像" onerror="this.src='images/default-avatar.svg'">
                                        <div class="user-role-badge member">会员</div>
                                    </div>
                                </div>
                                <div class="post-card-right">
                                    <div class="reply-reference">
                                        <i class="fas fa-quote-left"></i>
                                        回复给 <a href="#reply1" class="reply-parent-link">李四</a>
                                        <span class="reply-timestamp">2024年1月4日 14:40</span>
                                    </div>
                                    <div class="post-header">
                                        <div class="post-author">
                                            <span class="username">王五</span>
                                            <span class="post-date">2024年1月4日 14:40</span>
                                        </div>
                                    </div>
                                    <div class="post-content">
                                        <p>我已经更新了最新版，深色模式非常棒，对眼睛很友好！</p>
                                    </div>
                                    <div class="post-actions">
                                        <button class="post-reply-btn" data-require-login="true" data-parent-id="nested1" data-parent-user="王五">
                                            <i class="fas fa-reply"></i>
                                            回复
                                        </button>
                                    </div>
                                    <div class="nested-replies">
                                        <!-- 嵌套回复会在后续添加 -->
                                    </div>
                                </div>
                            </article>
                            
                            <!-- 张三的嵌套回复的独立副本 - 14:50 -->
                            <article class="post-card reply-card" id="nested2" data-is-nested-copy="true" data-original-reply="reply1">
                                <div class="post-card-left">
                                    <div class="post-avatar">
                                        <img src="images/default-avatar.svg" alt="用户头像" onerror="this.src='images/default-avatar.svg'">
                                        <div class="user-role-badge staff">管理员</div>
                                    </div>
                                </div>
                                <div class="post-card-right">
                                    <div class="reply-reference">
                                        <i class="fas fa-quote-left"></i>
                                        回复给 <a href="#reply1" class="reply-parent-link">李四</a>
                                        <span class="reply-timestamp">2024年1月4日 14:50</span>
                                    </div>
                                    <div class="post-header">
                                        <div class="post-author">
                                            <span class="username">张三</span>
                                            <span class="post-date">2024年1月4日 14:50</span>
                                        </div>
                                    </div>
                                    <div class="post-content">
                                        <p>谢谢支持！我们后续还会继续优化移动端的体验。</p>
                                    </div>
                                    <div class="post-actions">
                                        <button class="post-reply-btn" data-require-login="true" data-parent-id="nested2" data-parent-user="张三">
                                            <i class="fas fa-reply"></i>
                                            回复
                                        </button>
                                    </div>
                                    <div class="nested-replies">
                                        <!-- 嵌套回复会在后续添加 -->
                                    </div>
                                </div>
                            </article>
                            
                            <!-- 直接回复示例 - 赵六 15:15 -->
                            <article class="post-card reply-card" id="reply2">
                                <div class="post-card-left">
                                    <div class="post-avatar">
                                        <img src="images/default-avatar.svg" alt="用户头像" onerror="this.src='images/default-avatar.svg'">
                                        <div class="user-role-badge learner">学习者</div>
                                    </div>
                                </div>
                                <div class="post-card-right">
                                    <div class="post-header">
                                        <div class="post-author">
                                            <span class="username">赵六</span>
                                            <span class="post-date">2024年1月4日 15:15</span>
                                        </div>
                                    </div>
                                    <div class="post-content">
                                        <p>手势操作支持非常好用，大大提高了我浏览课程的效率！</p>
                                        <p>希望未来能支持更多种类的手势操作，让使用更方便。</p>
                                    </div>
                                    <div class="post-actions">
                                        <button class="post-reply-btn" data-require-login="true" data-parent-id="reply2" data-parent-user="赵六">
                                            <i class="fas fa-reply"></i>
                                            回复
                                        </button>
                                    </div>
                                    
                                    <!-- 直接嵌套回复区域 - 最多1级 -->
                                    <div class="nested-replies">
                                        <!-- 嵌套回复在需要时动态添加 -->
                                    </div>
                                </div>
                            </article>
                            
                            <!-- 更多回复将动态添加 -->
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- 确认弹窗 -->
    <div class="dialog-overlay" style="display: none;">
        <div class="dialog-box">
            <div class="dialog-header">
                <h3>确认取消</h3>
                <button class="dialog-close"><i class="fas fa-times"></i></button>
            </div>
            <div class="dialog-content">
                <p>你确定要取消回复吗？已输入的内容将会丢失。</p>
            </div>
            <div class="dialog-footer">
                <button class="cancel-dialog">取消</button>
                <button class="confirm-dialog">确定</button>
            </div>
        </div>
    </div>

    <footer class="main-footer">
        <div class="footer-content">
            <div class="footer-section">
                <h4>关于我们</h4>
                <p>EduWeb是一个致力于知识共享的开源教育平台</p>
            </div>
            <div class="footer-section">
                <h4>快速链接</h4>
                <ul>
                    <li><a href="courses.html">所有课程</a></li>
                    <li><a href="community.html">社区讨论</a></li>
                    <li><a href="terms.html">服务条款</a></li>
                    <li><a href="privacy.html">隐私政策</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 EduWeb. 采用 AGPLv3 许可证开源</p>
        </div>
    </footer>

    <script src="js/auth.js"></script>
    <script src="js/discussion-detail.js"></script>
    <script src="js/common.js"></script>
    <script src="js/notifications.js"></script>
</body>
</html> 